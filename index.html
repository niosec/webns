<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#3498db">
    <meta name="description" content="Conversor de unidades NS">
    <title>Conversor de Unidades</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="favicon.ico">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Conversor de Unidades</h1>
        
        <div class="form-group">
            <label for="unit-type">Seleccione el tipo de unidad:</label>
            <select id="unit-type">
                <option value="1">Energía</option>
                <option value="2">Frecuencia</option>
                <option value="3">Longitud</option>
                <option value="4">Masa</option>
                <option value="5">Fuerza</option>
                <option value="6"selected>Presión</option>
                <option value="7">Aceleración</option>
                <option value="8">Densidad</option>
                <option value="9">Tiempo</option>
                <option value="10">Velocidad</option>
                <option value="11">Volumen</option>
                <option value="12">Ángulo plano</option>
                <option value="13">Área</option>
            </select>
        </div>
        
        <div class="form-group">
            <label>Valor a convertir:</label>
            <input type="number" id="value" step="any" placeholder="Ingrese el valor">
        </div>
        
        <div class="form-group">
            <label>Seleccione las unidades:</label>
            <div class="unit-options">
                <div class="unit-column">
                    <h3>De:</h3>
                    <div id="from-unit-options"></div>
                </div>
                <div class="unit-column">
                    <h3>A:</h3>
                    <div id="to-unit-options"></div>
                </div>
            </div>
        </div>
        
        <button id="convert-btn">Convertir</button>
        
        <div class="result" id="result">
            <div class="result-title">Resultado de la conversión:</div>
            <div class="conversion" id="conversion-result"></div>
        </div>
    </div>

    <div id="install-container" class="hidden">
        <button id="install-btn">Instalar aplicación</button>
    </div>

    <script src="app.js"></script>
    <script>
        // Registrar el Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registrado con éxito:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Error al registrar el ServiceWorker:', error);
                    });
            });
        }

        // Manejar el evento de instalación
        let deferredPrompt;
        const installContainer = document.getElementById('install-container');
        const installBtn = document.getElementById('install-btn');

        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevenir que el navegador muestre el prompt automático
            e.preventDefault();
            // Guardar el evento para mostrarlo más tarde
            deferredPrompt = e;
            // Mostrar el botón de instalación
            installContainer.classList.remove('hidden');
        });

        installBtn.addEventListener('click', () => {
            // Ocultar el botón de instalación
            installContainer.classList.add('hidden');
            // Mostrar el prompt de instalación
            deferredPrompt.prompt();
            // Esperar a que el usuario responda al prompt
            deferredPrompt.userChoice.then((choiceResult) => {
                if (choiceResult.outcome === 'accepted') {
                    console.log('Usuario aceptó la instalación');
                } else {
                    console.log('Usuario rechazó la instalación');
                }
                deferredPrompt = null;
            });
        });
    </script>
</body>
</html>